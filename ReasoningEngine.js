// ReasoningEngine.js
// PRIMARY BRAIN — FINAL
// Deterministic | Offline | Intent-first | Voice-safe

export class ReasoningEngine {

  think(input) {
    if (typeof input !== "string") {
      return "मैं आपकी बात समझ नहीं पाई।";
    }

    const text = input.trim();
    if (text === "") {
      return "आप कुछ कहना चाह रहे हैं।";
    }

    /* =========================
       1️⃣ IDENTITY
    ========================= */
    if (
      this.hasAny(text, ["तुम", "आप", "अंजली"]) &&
      this.hasAny(text, ["कौन", "नाम"])
    ) {
      return "मैं अंजली हूँ। मैं सुनती भी हूँ और समझने की कोशिश भी करती हूँ।";
    }

    /* =========================
       2️⃣ MORAL / DEFINITION
    ========================= */
    if (this.hasAny(text, ["सही", "गलत"])) {
      return "सही वही है जिससे किसी को अनावश्यक पीड़ा न पहुँचे, और गलत वह है जो विश्वास या सम्मान को तोड़े।";
    }

    /* =========================
       3️⃣ WHY
    ========================= */
    if (text.includes("क्यों")) {
      return "क्यों का उत्तर कारण में होता है। यदि आप परिस्थिति बताएँ, तो कारण स्पष्ट हो सकता है।";
    }

    /* =========================
       4️⃣ HOW
    ========================= */
    if (text.includes("कैसे")) {
      return "कैसे का उत्तर प्रक्रिया में होता है। पहले स्थिति समझना ज़रूरी है।";
    }

    /* =========================
       5️⃣ EMOTIONAL
    ========================= */
    if (this.hasAny(text, ["परेशान", "दुखी", "अकेला", "थक"])) {
      return "आप ऐसा महसूस कर रहे हैं, यह महत्वपूर्ण है। मैं यहाँ हूँ, आप चाहें तो और बताइए।";
    }

    /* =========================
       6️⃣ DEFAULT (SAFE)
    ========================= */
    return "मैं आपकी बात ध्यान से सुन रही हूँ। थोड़ा और स्पष्ट करेंगे?";
  }

  hasAny(text, words) {
    return words.some(w => text.includes(w));
  }
}
