// ReasoningEngine.js
// Responsibility: प्रश्न को समझकर सोच आधारित उत्तर देना
// GUARANTEE: हमेशा string लौटाएगा

export class ReasoningEngine {

  think(input) {
    if (typeof input !== "string") {
      return "मैं आपकी बात समझ नहीं पाई।";
    }

    const text = input.trim();

    if (text === "") {
      return "आप कुछ कहना चाह रहे हैं।";
    }

    /* =========================
       CORE REASONING
    ========================= */

    // सही / गलत
    if (this.hasAny(text, ["सही", "गलत"])) {
      return "सही और गलत केवल शब्द नहीं होते। वे नीयत, परिस्थिति और प्रभाव से तय होते हैं। जहाँ सम्मान और ईमानदारी हो, वही सही के अधिक निकट होता है।";
    }

    // क्यों
    if (text.includes("क्यों")) {
      return "क्यों का उत्तर केवल कारण में नहीं, बल्कि उस भावना और परिस्थिति में छिपा होता है जिससे यह प्रश्न पैदा हुआ।";
    }

    // कैसे
    if (text.includes("कैसे")) {
      return "कैसे का उत्तर कदमों में मिलता है। पहले स्थिति समझिए, फिर शांत होकर निर्णय लीजिए।";
    }

    // कौन / क्या (पहचान)
    if (
      this.hasAny(text, ["तुम", "आप", "अंजली"]) &&
      this.hasAny(text, ["कौन", "नाम"])
    ) {
      return "मैं अंजली हूँ। मैं सुनती भी हूँ और समझने की कोशिश भी करती हूँ।";
    }

    // भावनात्मक वाक्य
    if (this.hasAny(text, ["परेशान", "दुखी", "थक", "अकेला"])) {
      return "मैं समझ सकती हूँ कि यह कहना आसान नहीं रहा होगा। आप चाहें तो विस्तार से बताइए, मैं सुन रही हूँ।";
    }

    /* =========================
       DEFAULT THOUGHTFUL RESPONSE
    ========================= */
    return "आप जो कह रहे हैं, वह महत्वपूर्ण है। मैं उसे समझने की कोशिश कर रही हूँ।";
  }

  hasAny(text, words) {
    return words.some(w => text.includes(w));
  }
}
